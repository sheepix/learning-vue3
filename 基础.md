# é›¶ã€å‚è€ƒ

1. å®˜æ–¹ï¼šhttps://v3.cn.vuejs.org/guide/introduction.html

# ä¸€ã€å®‰è£…

å°† Vue.js æ·»åŠ åˆ°é¡¹ç›®ä¸­ä¸»è¦æœ‰å››ç§æ–¹å¼ï¼š

1. åœ¨é¡µé¢ä¸Šä»¥ [CDN åŒ…](https://v3.cn.vuejs.org/guide/installation.html#cdn)çš„å½¢å¼å¯¼å…¥ã€‚
2. ä¸‹è½½ JavaScript æ–‡ä»¶å¹¶[è‡ªè¡Œæ‰˜ç®¡](https://v3.cn.vuejs.org/guide/installation.html#ä¸‹è½½å¹¶è‡ªæ‰˜ç®¡)ã€‚
3. ä½¿ç”¨ [npm](https://v3.cn.vuejs.org/guide/installation.html#npm) å®‰è£…å®ƒã€‚
4. ä½¿ç”¨å®˜æ–¹çš„ [CLI](https://v3.cn.vuejs.org/guide/installation.html#å‘½ä»¤è¡Œå·¥å…·-cli) æ¥æ„å»ºä¸€ä¸ªé¡¹ç›®ã€‚



- å®‰è£…Devtools

  [è·å– Chrome æ‰©å±•ç¨‹åº](https://chrome.google.com/webstore/detail/vuejs-devtools/ljjemllljcmogpfapbkkighbhhppjdbg)

  [è·å– Firefox é™„åŠ ç»„ä»¶](https://addons.mozilla.org/en-US/firefox/addon/vue-js-devtools/)

  [è·å–ç‹¬ç«‹çš„ Electron åº”ç”¨ç¨‹åº](https://github.com/vuejs/vue-devtools/blob/dev/packages/shell-electron/README.md)

- CDN

  è·å–æœ€æ–°Vueï¼Œç”¨äºå¼€å‘ç¯å¢ƒ

```html
<script src="https://unpkg.com/vue@next"></script>
```

- ä¸‹è½½å¹¶è‡ªè¡Œæ‰˜ç®¡

- npm

  ```bash
  # æœ€æ–°ç¨³å®šç‰ˆ
  $ npm install vue@next
  ```

  Vue è¿˜æä¾›äº†ç¼–å†™[å•æ–‡ä»¶ç»„ä»¶](https://v3.cn.vuejs.org/guide/single-file-component.html)çš„é…å¥—å·¥å…·

  ```bash
  $ npm install -D @vue/compiler-sfc
  ```

- CLI

  1. å®‰è£…cli

     ```bash
     yarn global add @vue/cli
     # æˆ–
     npm install -g @vue/cli
     ```

  2. åœ¨vueé¡¹ç›®ä¸­è¿è¡Œ

     ```bash
     vue upgrade --next
     ```

## Vite

[Vite](https://github.com/vitejs/vite) æ˜¯ä¸€ä¸ª web å¼€å‘æ„å»ºå·¥å…·ï¼Œç”±äºå…¶åŸç”Ÿ ES æ¨¡å—å¯¼å…¥æ–¹å¼ï¼Œå¯ä»¥å®ç°é—ªç”µèˆ¬çš„å†·æœåŠ¡å™¨å¯åŠ¨ã€‚

é€šè¿‡åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ Vite å¿«é€Ÿæ„å»º Vue é¡¹ç›®ã€‚

```bash
# npm 6.x
$ npm init vite@latest <project-name> --template vue

# npm 7+ï¼Œéœ€è¦åŠ ä¸Šé¢å¤–çš„åŒçŸ­æ¨ªçº¿
$ npm init vite@latest <project-name> -- --template vue

$ cd <project-name>
$ npm install
$ npm run dev
```

or yarn

```bash
$ yarn create vite <project-name> --template vue
$ cd <project-name>
$ yarn
$ yarn dev
```



# äºŒã€ä»‹ç»

## å£°æ˜å¼æ¸²æŸ“

```html
<div id="counter">
  Counter: {{ counter }}
</div>
```

```js
const Counter = {
  data() {
    return {
      counter: 0
    }
  },
  mounted() {
    setInterval(() => {
      this.counter++
    }, 1000)
  }
}

Vue.createApp(Counter).mount('#counter')
```

- `v-bind:attribute` è¢«ç§°ä¸º`æŒ‡ä»¤`

- æŒ‡ä»¤å¸¦æœ‰å‰ç¼€`v-`

- `v-on`æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨

  ```html
  <div id="event-handling">
    <p>{{ message }}</p>
    <button v-on:click="reverseMessage">åè½¬ Message</button>
  </div>
  ```

  ```js
  const EventHandling = {
    data() {
      return {
        message: 'Hello Vue.js!'
      }
    },
    methods: {
      reverseMessage() {
        this.message = this.message
          .split('')
          .reverse()
          .join('')
      }
    }
  }
  
  Vue.createApp(EventHandling).mount('#event-handling')
  ```

- `v-model`åŒå‘ç»‘å®š

## æ¡ä»¶ä¸å¾ªç¯

- `v-if`

  ```html
  <div id="conditional-rendering">
    <span v-if="seen">ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†</span>
  </div>
  ```

- `v-for`

  ```html
  <div id="list-rendering">
    <ol>
      <li v-for="todo in todos">
        {{ todo.text }}
      </li>
    </ol>
  </div>
  ```

## ç»„ä»¶åŒ–åº”ç”¨æ„å»º

```js
// åˆ›å»º Vue åº”ç”¨
const app = Vue.createApp(...)

// å®šä¹‰åä¸º todo-item çš„æ–°ç»„ä»¶
app.component('todo-item', {
  template: `<li>This is a todo</li>`
})

// æŒ‚è½½ Vue åº”ç”¨
app.mount(...)
```

ä½¿ç”¨ç»„ä»¶

```html
<ol>
  <!-- åˆ›å»ºä¸€ä¸ª todo-item ç»„ä»¶å®ä¾‹ -->
  <todo-item></todo-item>
</ol>
```

- æ¥æ”¶å‚æ•°`prop`

  ```js
  const TodoList = {
    data() {
      return {
        groceryList: [
          { id: 0, text: 'Vegetables' },
          { id: 1, text: 'Cheese' },
          { id: 2, text: 'Whatever else humans are supposed to eat' }
        ]
      }
    }
  }
  
  const app = Vue.createApp(TodoList)
  
  app.component('todo-item', {
    props: ['todo'],
    template: `<li>{{ todo.text }}</li>`
  })
  
  app.mount('#todo-list-app')
  ```

  ```html
  <div id="todo-list-app">
    <ol>
       <!--
        ç°åœ¨æˆ‘ä»¬ä¸ºæ¯ä¸ª todo-item æä¾› todo å¯¹è±¡
        todo å¯¹è±¡æ˜¯å˜é‡ï¼Œå³å…¶å†…å®¹å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚
        æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸ºæ¯ä¸ªç»„ä»¶æä¾›ä¸€ä¸ªâ€œkeyâ€ï¼Œç¨åå†
        ä½œè¯¦ç»†è§£é‡Šã€‚
      -->
      <todo-item
        v-for="item in groceryList"
        v-bind:todo="item"
        v-bind:key="item.id"
      ></todo-item>
    </ol>
  </div>
  ```



# ä¸‰ã€åº”ç”¨&ç»„ä»¶å®ä¾‹

## åˆ›å»ºä¸€ä¸ªåº”ç”¨å®ä¾‹

æ¯ä¸ª Vue åº”ç”¨éƒ½æ˜¯é€šè¿‡ç”¨ `createApp` å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„**åº”ç”¨å®ä¾‹**å¼€å§‹çš„ï¼š

```js
Vue.createApp({})
  .component('SearchInput', SearchInputComponent)
  .directive('focus', FocusDirective)
  .use(LocalePlugin)
```

## æ ¹ç»„ä»¶

- ä¼ é€’ç»™ `createApp` çš„é€‰é¡¹ç”¨äºé…ç½®**æ ¹ç»„ä»¶**ã€‚å½“æˆ‘ä»¬**æŒ‚è½½**åº”ç”¨æ—¶ï¼Œè¯¥ç»„ä»¶è¢«ç”¨ä½œæ¸²æŸ“çš„èµ·ç‚¹ã€‚

- ä¸€ä¸ªåº”ç”¨éœ€è¦è¢«æŒ‚è½½åˆ°ä¸€ä¸ª DOM å…ƒç´ ä¸­

  ```js
  const RootComponent = { 
    /* é€‰é¡¹ */ 
  }
  const app = Vue.createApp(RootComponent)
  const vm = app.mount('#app')
  ```

- `mount`è¿”å›çš„æ˜¯æ ¹ç»„ä»¶å®ä¾‹
- æ¯ä¸ªç»„ä»¶å°†æœ‰è‡ªå·±çš„ç»„ä»¶å®ä¾‹ `vm`

## ç»„ä»¶å®ä¾‹

- åœ¨ `data` ä¸­å®šä¹‰çš„ property æ˜¯é€šè¿‡ç»„ä»¶å®ä¾‹æš´éœ²çš„

  ```js
  const app = Vue.createApp({
    data() {
      return { count: 4 }
    }
  })
  
  const vm = app.mount('#app')
  
  console.log(vm.count) // => 4
  ```

- å…¶ä»–ç»„ä»¶é€‰é¡¹ï¼š`methods`ï¼Œ`props`ï¼Œ`computed`ï¼Œ`inject` å’Œ `setup`

- å†…ç½®propertyï¼šå¦‚ `$attrs` å’Œ `$emit`

## ç”Ÿå‘½å‘¨æœŸé’©å­

- æ¯ä¸ªç»„ä»¶åœ¨è¢«åˆ›å»ºæ—¶éƒ½è¦ç»è¿‡ä¸€ç³»åˆ—çš„åˆå§‹åŒ–è¿‡ç¨‹â€”â€”ä¾‹å¦‚ï¼Œéœ€è¦è®¾ç½®æ•°æ®ç›‘å¬ã€ç¼–è¯‘æ¨¡æ¿ã€å°†å®ä¾‹æŒ‚è½½åˆ° DOM å¹¶åœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–° DOM ç­‰

- è¿‡ç¨‹ä¸­ä¹Ÿä¼šè¿è¡Œä¸€äº›å«åš**ç”Ÿå‘½å‘¨æœŸé’©å­**çš„å‡½æ•°ã€‚è®©ç”¨æˆ·å¯ä»¥ä»‹å…¥

  ```js
  Vue.createApp({
    data() {
      return { count: 1}
    },
    created() {
      // `this` æŒ‡å‘ vm å®ä¾‹
      console.log('count is: ' + this.count) // => "count is: 1"
    }
  })
  ```

- è¿˜æœ‰å®åŠ›ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µçš„é’©å­ï¼š [mounted](https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#mounted)ã€[updated](https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#updated) å’Œ [unmounted](https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#unmounted)

- ç”Ÿå‘½å‘¨æœŸé’©å­çš„ `this` ä¸Šä¸‹æ–‡æŒ‡å‘è°ƒç”¨å®ƒçš„å½“å‰æ´»åŠ¨å®ä¾‹ã€‚
- ä¸è¦åœ¨é€‰é¡¹ property æˆ–å›è°ƒä¸Šä½¿ç”¨[ç®­å¤´å‡½æ•°](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Arrow_functions)

## ç”Ÿå‘½å‘¨æœŸå›¾ç¤º

![å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸ](https://raw.githubusercontent.com/sheepix/BlogImage/main/lifecycle.svg)

# å››ã€æ¨¡ç‰ˆè¯­æ³•

## æ’å€¼

**æ–‡æœ¬**

1. Mustache

```html
<span>Message: {{ msg }}</span>
```

- Mustache æ ‡ç­¾å°†ä¼šè¢«æ›¿ä»£ä¸ºå¯¹åº”ç»„ä»¶å®ä¾‹ä¸­ `msg` property çš„å€¼
- æ— è®ºä½•æ—¶ï¼Œç»‘å®šçš„ç»„ä»¶å®ä¾‹ä¸Š `msg` property å‘ç”Ÿäº†æ”¹å˜ï¼Œæ’å€¼å¤„çš„å†…å®¹éƒ½ä¼šæ›´æ–°ã€‚
- Mustacheä¸èƒ½ç”¨åœ¨Attributeé‡Œ

2. `v-once`: ä¸€æ¬¡æ€§æ’å€¼ï¼Œåç»­ä¸ä¼šæ”¹å˜

```html
<span v-once>è¿™ä¸ªå°†ä¸ä¼šæ”¹å˜: {{ msg }}</span>
```

**åŸå§‹HTML**

- Mustacheä¼šå°†æ•°æ®è§£é‡Šä¸ºæ™®é€šæ–‡æœ¬
- éœ€è¦è¾“å‡ºhtmlåˆ™éœ€è¦`v-html`æ ‡ç­¾

```html
<p>Using v-html directive: <span v-html="rawHtml"></span></p>
```

**Attribute**

- `v-bind`æŒ‡ä»¤

```html
<div v-bind:id="dynamicId"></div>
```

- å¦‚æœç»‘å®šçš„å€¼ä¸º`null`or`undefined`,åˆ™attributeä¸ä¼šåŒ…å«åœ¨æ¸²æŸ“çš„å…ƒç´ ä¸Š
  - å¯¹äºå¸ƒå°”attributeï¼Œ[truthy](https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy)å’Œç©ºå­—ç¬¦ä¸²éƒ½ä¼šè®©attributeåŒ…å«ï¼Œè€Œ[falsy](https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy)éƒ½ä¼šè¢«å¿½ç•¥

**ä½¿ç”¨JavaScriptè¡¨è¾¾å¼**

```html
{{ number + 1 }}

{{ ok ? 'YES' : 'NO' }}

{{ message.split('').reverse().join('') }}

<div v-bind:id="'list-' + id"></div>
```

- æ¯ä¸ªç»‘å®šéƒ½åªèƒ½åŒ…å«å•ä¸ªè¡¨è¾¾å¼

## æŒ‡ä»¤

- Directives, å¸¦æœ‰`v-`å‰ç¼€çš„attribute
- é¢„æœŸå€¼éƒ½æ˜¯**å•ä¸ªJavaScriptè¡¨è¾¾å¼**(`v-for`,`v-on`é™¤å¤–)

**å‚æ•°**

```html
<!-- hrefä¸ºv-bindçš„å‚æ•° -->
<a v-bind:href="url"> ... </a>
<!-- clickä¸ºv-onçš„å‚æ•° -->
<a v-on:click="doSomething"> ... </a>
```

**åŠ¨æ€å‚æ•°**

- ä¹Ÿå¯ä»¥åœ¨æŒ‡ä»¤å‚æ•°ä¸­ä½¿ç”¨ JavaScript è¡¨è¾¾å¼ï¼Œæ–¹æ³•æ˜¯ç”¨æ–¹æ‹¬å·`[]`æ‹¬èµ·æ¥

```html
<a v-on:[eventName]="doSomething"> ... </a>
```

**ä¿®é¥°ç¬¦**

- ä¿®é¥°ç¬¦ (modifier) æ˜¯ä»¥åŠè§’å¥å· `.` æŒ‡æ˜çš„ç‰¹æ®Šåç¼€ï¼Œç”¨äºæŒ‡å‡ºä¸€ä¸ªæŒ‡ä»¤åº”è¯¥ä»¥ç‰¹æ®Šæ–¹å¼ç»‘å®šã€‚

```html
<!-- .prevent ä¿®é¥°ç¬¦å‘Šè¯‰ v-on æŒ‡ä»¤å¯¹äºè§¦å‘çš„äº‹ä»¶è°ƒç”¨ event.preventDefault() -->
<form v-on:submit.prevent="onSubmit">...</form>
```

**ç¼©å†™**

- `v-bind`

```html
<!-- å®Œæ•´è¯­æ³• -->
<a v-bind:href="url"> ... </a>

<!-- ç¼©å†™ -->
<a :href="url"> ... </a>

<!-- åŠ¨æ€å‚æ•°çš„ç¼©å†™ -->
<a :[key]="url"> ... </a>
```

- `v-on`ï¼šå¦‚

```html
<!-- å®Œæ•´è¯­æ³• -->
<a v-on:click="doSomething"> ... </a>

<!-- ç¼©å†™ -->
<a @click="doSomething"> ... </a>

<!-- åŠ¨æ€å‚æ•°çš„ç¼©å†™ (2.6.0+) -->
<a @[event]="doSomething"> ... </a>
```

**æ³¨æ„äº‹é¡¹**

- åŠ¨æ€å‚æ•°å€¼çº¦å®šï¼š
  - åŠ¨æ€å‚æ•°é¢„æœŸä¼šæ±‚å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
  - `null`ä¼šç§»é™¤ç»‘å®š
  - ä»»ä½•å…¶å®ƒéå­—ç¬¦ä¸²ç±»å‹çš„å€¼éƒ½å°†ä¼šè§¦å‘ä¸€ä¸ªè­¦å‘Š
- åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çº¦å®šï¼š
  - åŠ¨æ€å‚æ•°è¡¨è¾¾å¼æœ‰ä¸€äº›è¯­æ³•çº¦æŸï¼Œå› ä¸ºæŸäº›å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼å’Œå¼•å·ï¼Œæ”¾åœ¨ HTML attribute åé‡Œæ˜¯æ— æ•ˆçš„
  - å˜é€šçš„åŠæ³•æ˜¯ä½¿ç”¨æ²¡æœ‰ç©ºæ ¼æˆ–å¼•å·çš„è¡¨è¾¾å¼ï¼Œæˆ–ç”¨[è®¡ç®—å±æ€§](https://v3.cn.vuejs.org/guide/computed.html)æ›¿ä»£è¿™ç§å¤æ‚è¡¨è¾¾å¼ã€‚

```html
<!--
åœ¨ DOM ä¸­ä½¿ç”¨æ¨¡æ¿æ—¶è¿™æ®µä»£ç ä¼šè¢«è½¬æ¢ä¸º `v-bind:[someattr]`ã€‚
é™¤éåœ¨å®ä¾‹ä¸­æœ‰ä¸€ä¸ªåä¸ºâ€œsomeattrâ€çš„ propertyï¼Œå¦åˆ™ä»£ç ä¸ä¼šå·¥ä½œã€‚
-->
<a v-bind:[someAttr]="value"> ... </a>
```

- JavaScriptè¡¨è¾¾å¼
  - æ¨¡æ¿è¡¨è¾¾å¼éƒ½è¢«æ”¾åœ¨æ²™ç›’ä¸­ï¼Œåªèƒ½è®¿é—®ä¸€ä¸ª[å—é™çš„åˆ—è¡¨](https://github.com/vuejs/vue-next/blob/master/packages/shared/src/globalsWhitelist.ts#L3)ï¼Œå¦‚ `Math` å’Œ `Date`ã€‚
  - ä½ ä¸åº”è¯¥åœ¨æ¨¡æ¿è¡¨è¾¾å¼ä¸­è¯•å›¾è®¿é—®ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ã€‚



# äº”ã€Data Propertyå’Œæ–¹æ³•

## Data Property

- ç»„ä»¶çš„ `data` é€‰é¡¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚
- Vueé€šè¿‡å“åº”æ€§ç³»ç»Ÿå°†è¿”å›å¯¹è±¡åŒ…è£¹èµ·æ¥ï¼Œå¹¶ä»¥`$data`çš„å½¢å¼å­˜å‚¨åœ¨ç»„ä»¶å®ä¾‹ä¸­ã€‚
- è¯¥å¯¹è±¡çš„ä»»ä½•é¡¶çº§propertyä¹Ÿç›´æ¥é€šè¿‡ç»„ä»¶å®ä¾‹æš´éœ²å‡ºæ¥

```js
const app = Vue.createApp({
  data() {
    return { count: 4 }
  }
})

const vm = app.mount('#app')

console.log(vm.$data.count) // => 4
console.log(vm.count)       // => 4

// ä¿®æ”¹ vm.count çš„å€¼ä¹Ÿä¼šæ›´æ–° $data.count
vm.count = 5
console.log(vm.$data.count) // => 5

// åä¹‹äº¦ç„¶
vm.$data.count = 6
console.log(vm.count) // => 6
```

- å“åº”æ€§ç³»ç»Ÿåªä¼šè·Ÿè¸ª`$data`å¯¹è±¡å†…çš„propertyï¼Œæ‰€ä»¥åœ¨dataå‡½æ•°å¤–æ·»åŠ çš„propertyå°†ä¸ä¼šè¢«è‡ªåŠ¨è·Ÿè¸ª
- Vue ä½¿ç”¨ `$` å‰ç¼€é€šè¿‡ç»„ä»¶å®ä¾‹æš´éœ²è‡ªå·±çš„å†…ç½® APIã€‚å®ƒè¿˜ä¸ºå†…éƒ¨ property ä¿ç•™ `_` å‰ç¼€ã€‚ä½ åº”è¯¥é¿å…ä½¿ç”¨è¿™ä¸¤ä¸ªå­—ç¬¦å¼€å¤´çš„çš„é¡¶çº§ `data` property åç§°ã€‚

## æ–¹æ³•

- é€šè¿‡`methods` é€‰é¡¹å‘ç»„ä»¶å®ä¾‹æ·»åŠ æ–¹æ³•

```js
const app = Vue.createApp({
  data() {
    return { count: 4 }
  },
  methods: {
    increment() {
      // `this` æŒ‡å‘è¯¥ç»„ä»¶å®ä¾‹
      this.count++
    }
  }
})

const vm = app.mount('#app')
console.log(vm.count) // => 4
vm.increment()
console.log(vm.count) // => 5
```

- Vue è‡ªåŠ¨ä¸º `methods` ç»‘å®š `this`
- åœ¨å®šä¹‰ `methods` æ—¶åº”é¿å…ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå› ä¸ºè¿™ä¼šé˜»æ­¢ Vue ç»‘å®šæ°å½“çš„ `this` æŒ‡å‘ã€‚
- `methods` å’Œç»„ä»¶å®ä¾‹çš„å…¶å®ƒæ‰€æœ‰ property ä¸€æ ·å¯ä»¥åœ¨ç»„ä»¶çš„æ¨¡æ¿ä¸­è¢«è®¿é—®ã€‚åœ¨æ¨¡æ¿ä¸­ï¼Œå®ƒä»¬é€šå¸¸è¢«å½“åšäº‹ä»¶ç›‘å¬ä½¿ç”¨ï¼š

```html
<button @click="increment">Up vote</button>
```

## é˜²æŠ–å’ŒèŠ‚æµ

- ä½¿ç”¨Lodashåº“å®ç°

```html
<!-- å¯å¤ç”¨ç»„ä»¶å…±äº«ç›¸åŒçš„é˜²æŠ–å‡½æ•° -->
<script src="https://unpkg.com/lodash@4.17.20/lodash.min.js"></script>
<script>
  Vue.createApp({
    methods: {
      // ç”¨ Lodash çš„é˜²æŠ–å‡½æ•°
      click: _.debounce(function() {
        // ... å“åº”ç‚¹å‡» ...
      }, 500)
    }
  }).mount('#app')
</script>
```

```js
app.component('save-button', {
  created() {
    // ç”¨ Lodash çš„é˜²æŠ–å‡½æ•°
    this.debouncedClick = _.debounce(this.click, 500)
  },
  unmounted() {
    // ç§»é™¤ç»„ä»¶æ—¶ï¼Œå–æ¶ˆå®šæ—¶å™¨
    this.debouncedClick.cancel()
  },
  methods: {
    click() {
      // ... å“åº”ç‚¹å‡» ...
    }
  },
  template: `
    <button @click="debouncedClick">
      Save
    </button>
  `
})
```



# å…­ã€è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨

## è®¡ç®—å±æ€§

```html
<div id="computed-basics">
  <p>Has published books:</p>
  <span>{{ publishedBooksMessage }}</span>
</div>
```

```js
Vue.createApp({
  data() {
    return {
      author: {
        name: 'John Doe',
        books: [
          'Vue 2 - Advanced Guide',
          'Vue 3 - Basic Guide',
          'Vue 4 - The Mystery'
        ]
      }
    }
  },
  computed: {
    // è®¡ç®—å±æ€§çš„ getter
    publishedBooksMessage() {
      // `this` æŒ‡å‘ vm å®ä¾‹
      return this.author.books.length > 0 ? 'Yes' : 'No'
    }
  }
}).mount('#computed-basics')
```

- è®¡ç®—å±æ€§æ˜¯æœºé‡å“åº”ä¾èµ–å…³ç³»ç¼“å­˜çš„ã€‚ä¾èµ–ä¸å˜å°±ä¸ä¼šé‡æ–°è®¡ç®—ã€‚
- è®¡ç®—å±æ€§é»˜è®¤åªæœ‰getterï¼Œå¯æŒ‰éœ€è®¾å®šsetter

```js
computed: {
  fullName: {
    // getter
    get() {
      return this.firstName + ' ' + this.lastName
    },
    // setter
    set(newValue) {
      const names = newValue.split(' ')
      this.firstName = names[0]
      this.lastName = names[names.length - 1]
    }
  }
}
```

## ä¾¦å¬å™¨

- å½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œæ¨èç”¨`watch`

```html
<div id="watch-example">
  <p>
    Ask a yes/no question:
    <input v-model="question" />
  </p>
  <p>{{ answer }}</p>
</div>
```

```html
<!-- å› ä¸º AJAX åº“å’Œé€šç”¨å·¥å…·çš„ç”Ÿæ€å·²ç»ç›¸å½“ä¸°å¯Œï¼ŒVue æ ¸å¿ƒä»£ç æ²¡æœ‰é‡å¤ -->
<!-- æä¾›è¿™äº›åŠŸèƒ½ä»¥ä¿æŒç²¾ç®€ã€‚è¿™ä¹Ÿå¯ä»¥è®©ä½ è‡ªç”±é€‰æ‹©è‡ªå·±æ›´ç†Ÿæ‚‰çš„å·¥å…·ã€‚ -->
<script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
<script>
  const watchExampleVM = Vue.createApp({
    data() {
      return {
        question: '',
        answer: 'Questions usually contain a question mark. ;-)'
      }
    },
    watch: {
      // whenever question changes, this function will run
      question(newQuestion, oldQuestion) {
        if (newQuestion.indexOf('?') > -1) {
          this.getAnswer()
        }
      }
    },
    methods: {
      getAnswer() {
        this.answer = 'Thinking...'
        axios
          .get('https://yesno.wtf/api')
          .then(response => {
            this.answer = response.data.answer
          })
          .catch(error => {
            this.answer = 'Error! Could not reach the API. ' + error
          })
      }
    }
  }).mount('#watch-example')
</script>
```

- [Watch API](https://v3.cn.vuejs.org/api/instance-methods.html#watch)



# ä¸ƒã€Classä¸Styleç»‘å®š

## ç»‘å®šHTML Class

**å¯¹è±¡è¯­æ³•**

- `:class` or `v-bind:class`

```html
# isActiveå±æ€§ä¸ºçœŸåˆ™æ·»åŠ activeè¿™ä¸ªclass
<div :class="{ active: isActive }"></div>
```

- ç»‘å®šçš„æ•°æ®å¯¹è±¡ä¸å¿…å†…è”å®šä¹‰åœ¨æ¨¡æ¿é‡Œ

```html
<div :class="classObject"></div>
```

```js
data() {
  return {
    classObject: {
      active: true,
      'text-danger': false
    }
  }
}
```

- å¯ä»¥ç»‘å®šè®¡ç®—å±æ€§

**æ•°ç»„è¯­æ³•**

```html
<div :class="[activeClass, errorClass]"></div>
```

```js
data() {
  return {
    activeClass: 'active',
    errorClass: 'text-danger'
  }
}
```

- ä¸‰å…ƒè¡¨è¾¾å¼

```html
<div :class="[isActive ? activeClass : '', errorClass]"></div>
```

- ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡è¯­æ³•

```html
<div :class="[{ active: isActive }, errorClass]"></div>
```

**ç»„ä»¶ä¸Šä½¿ç”¨**

```js
const app = Vue.createApp({})

app.component('my-component', {
  template: `<p class="foo bar">Hi!</p>`
})
```

```html
<div id="app">
  <my-component class="baz boo"></my-component>
  <!-- or --> 
  <my-component :class="{ active: isActive }"></my-component>
</div>


```

- è‹¥ç»„ä»¶æœ‰å¤šä¸ªè·Ÿå…ƒç´ ï¼Œéœ€è¦`$attrs`æŒ‡å®šæ¥æ”¶classçš„åœ°æ–¹

```js
const app = Vue.createApp({})

app.component('my-component', {
  template: `
    <p :class="$attrs.class">Hi!</p>
    <span>This is a child component</span>
  `
})
```

## ç»‘å®šå†…è”æ ·å¼

- Vue å°†è‡ªåŠ¨ä¾¦æµ‹éœ€è¦æµè§ˆå™¨å¼•æ“å‰ç¼€çš„CSS propertyï¼Œå¹¶æ·»åŠ ç›¸åº”çš„å‰ç¼€

**å¯¹è±¡è¯­æ³•**

```html
<div :style="styleObject"></div>
```

```js
data() {
  return {
    styleObject: {
      color: 'red',
      fontSize: '13px'
    }
  }
}
```

**æ•°ç»„è¯­æ³•**

```html
<div :style="[baseStyles, overridingStyles]"></div>
```

**å¤šé‡å€¼**

```html
<div :style="{ display: ['-webkit-box', '-ms-flexbox', 'flex'] }"></div>
```



# å…«ã€ æ¡ä»¶æ¸²æŸ“

## v-if

```html
<h1 v-if="awesome">Vue is awesome!</h1>
<h1 v-else>Oh no ğŸ˜¢</h1>
```

- åœ¨`<template>`å…ƒç´ ä¸Šä½¿ç”¨`v-if`æ¡ä»¶æ¸²æŸ“åˆ†ç»„

```html
<template v-if="ok">
  <h1>Title</h1>
  <p>Paragraph 1</p>
  <p>Paragraph 2</p>
</template>
```

- `v-else`: å¿…é¡»ç´§è·Ÿåœ¨å¸¦ `v-if` æˆ–è€… `v-else-if` çš„å…ƒç´ çš„åé¢ï¼Œå¦åˆ™å®ƒå°†ä¸ä¼šè¢«è¯†åˆ«ã€‚

- `v-else-if`: else-if, å¯ä»¥è¿ç»­ä½¿ç”¨

## v-show

- `v-show` åªæ˜¯ç®€å•åœ°åˆ‡æ¢å…ƒç´ çš„ CSS property `display

- `v-show` ä¸æ”¯æŒ `<template>` å…ƒç´ ï¼Œä¹Ÿä¸æ”¯æŒ `v-else`ã€‚

- ä¸€èˆ¬æ¥è¯´ï¼Œ`v-if` æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ `v-show` æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦éå¸¸é¢‘ç¹åœ°åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨ `v-show` è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ä½¿ç”¨ `v-if` è¾ƒå¥½ã€‚

æ³¨æ„ï¼š**ä¸æ¨è**åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸ŠåŒæ—¶ä½¿ç”¨ `v-if` å’Œ `v-for`



# ä¹ã€åˆ—è¡¨æ¸²æŸ“

## ç”¨`v-for`æŠŠä¸€ä¸ªæ•°ç»„å¯¹åº”ä¸ºä¸€ç»„å…ƒç´ 

```html
<ul id="array-rendering">
  <li v-for="item in items">
    {{ item.message }}
  </li>
</ul>
```

```js
Vue.createApp({
  data() {
    return {
      items: [{ message: 'Foo' }, { message: 'Bar' }]
    }
  }
}).mount('#array-rendering')
```

- åœ¨ `v-for` å—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ propertyã€‚
- `v-for` è¿˜æ”¯æŒä¸€ä¸ªå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå³å½“å‰é¡¹çš„ç´¢å¼•ã€‚

```html
<ul id="array-with-index">
  <li v-for="(item, index) in items">
    {{ parentMessage }} - {{ index }} - {{ item.message }}
  </li>
</ul>
```

- å¯ä»¥ç”¨ `of` æ›¿ä»£ `in` ä½œä¸ºåˆ†éš”ç¬¦

```html
<div v-for="item of items"></div>
```

## åœ¨`v-for`é‡Œä½¿ç”¨å¯¹è±¡

```html
<li v-for="(value, name, index) in myObject">
  {{ index }}. {{ name }}: {{ value }}
</li>
```

```js
Vue.createApp({
  data() {
    return {
      myObject: {
        title: 'How to do lists in Vue',
        author: 'Jane Doe',
        publishedAt: '2016-04-10'
      }
    }
  }
}).mount('#v-for-object')
```

## ç»´æŠ¤çŠ¶æ€

- å½“ Vue æ­£åœ¨æ›´æ–°ä½¿ç”¨ `v-for` æ¸²æŸ“çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨â€œå°±åœ°æ›´æ–°â€çš„ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯å°±åœ°æ›´æ–°æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒä»¬åœ¨æ¯ä¸ªç´¢å¼•ä½ç½®æ­£ç¡®æ¸²æŸ“ã€‚
- ä¸ºäº†ç»™ Vue ä¸€ä¸ªæç¤ºï¼Œä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œé‡ç”¨å’Œé‡æ–°æ’åºç°æœ‰å…ƒç´ ï¼Œä½ éœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€ `key` attribute

```html
<div v-for="item in items" :key="item.id">
  <!-- content -->
</div>
```

- ä¸è¦ä½¿ç”¨å¯¹è±¡æˆ–æ•°ç»„ä¹‹ç±»çš„éåŸºæœ¬ç±»å‹å€¼ä½œä¸º `v-for` çš„ keyã€‚è¯·ç”¨å­—ç¬¦ä¸²æˆ–æ•°å€¼ç±»å‹çš„å€¼ã€‚

## æ•°ç»„æ›´æ–°æ£€æµ‹

- Vueä¾¦å¬çš„æ•°ç»„å˜æ›´æ–¹æ³•ï¼š
  - `push()`
  - `pop()`
  - `shift()`
  - `unshift()`
  - `splice()`
  - `sort()`
  - `reverse()`

- æ›¿æ¢æ•°ç»„æ–¹æ³•ï¼š
  - `filter()`ã€`concat()` å’Œ `slice()`

```js
example1.items = example1.items.filter(item => item.message.match(/Foo/)
```

ç”±äºvueä½¿ç”¨äº†åªèƒ½çš„å¯å‘å¼æ–¹æ³•ï¼Œç”¨ä¸€ä¸ªå«æœ‰ç›¸åŒå…ƒç´ çš„æ•°ç»„æ›¿æ¢åŸæ•°ç»„æ˜¯é«˜æ•ˆçš„æ“ä½œ

## æ˜¾ç¤ºè¿‡æ»¤/æ’åºåçš„ç»“æœ

- æ˜¾ç¤ºä¸€ä¸ªæ•°ç»„ç»è¿‡è¿‡æ»¤æˆ–æ’åºåçš„ç‰ˆæœ¬ï¼Œè€Œä¸å®é™…å˜æ›´æˆ–é‡ç½®åŸå§‹æ•°æ®

```html
<li v-for="n in evenNumbers" :key="n">{{ n }}</li>
```

```js
data() {
  return {
    numbers: [ 1, 2, 3, 4, 5 ]
  }
},
computed: {
  evenNumbers() {
    return this.numbers.filter(number => number % 2 === 0)
  }
}
```

or

```html
<ul v-for="numbers in sets">
  <li v-for="n in even(numbers)" :key="n">{{ n }}</li>
</ul>
```

```js
data() {
  return {
    sets: [[ 1, 2, 3, 4, 5 ], [6, 7, 8, 9, 10]]
  }
},
methods: {
  even(numbers) {
    return numbers.filter(number => number % 2 === 0)
  }
}
```

## åœ¨`v-for`é‡Œä½¿ç”¨å€¼çš„èŒƒå›´

- æ•´å‹

```html
<div id="range" class="demo">
  <span v-for="n in 10" :key="n">{{ n }} </span>
</div>
```

## åœ¨`<template>`ä¸­ä½¿ç”¨`v-for`

```html
<ul>
  <template v-for="item in items" :key="item.msg">
    <li>{{ item.msg }}</li>
    <li class="divider" role="presentation"></li>
  </template>
</ul>
```

## `v-for` ä¸ `v-if` ä¸€åŒä½¿ç”¨

- ä¸æ¨èåœ¨åŒä¸€å…ƒç´ ä¸ŠåŒæ—¶ä½¿ç”¨
- `v-if` æ¯”`v-for`ä¼˜å…ˆçº§æ›´é«˜

```html
<!-- This will throw an error because property "todo" is not defined on instance. -->

<li v-for="todo in todos" v-if="!todo.isComplete">
  {{ todo.name }}
</li>
```

```html
<template v-for="todo in todos" :key="todo.name">
  <li v-if="!todo.isComplete">
    {{ todo.name }}
  </li>
</template>
```

## åœ¨ç»„ä»¶ä¸Šä½¿ç”¨`v-for`

```html
<my-component v-for="item in items" :key="item.id"></my-component>
```

- ç”±äºç»„ä»¶æœ‰è‡ªå·±ç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œéœ€è¦ä½¿ç”¨propsä¼ å€¼

```html
<my-component
  v-for="(item, index) in items"
  :item="item"
  :index="index"
  :key="item.id"
></my-component>
```

- å®Œæ•´ä¾‹å­

```html
<div id="todo-list-example">
  <form v-on:submit.prevent="addNewTodo">
    <label for="new-todo">Add a todo</label>
    <input
      v-model="newTodoText"
      id="new-todo"
      placeholder="E.g. Feed the cat"
    />
    <button>Add</button>
  </form>
  <ul>
    <todo-item
      v-for="(todo, index) in todos"
      :key="todo.id"
      :title="todo.title"
      @remove="todos.splice(index, 1)"
    ></todo-item>
  </ul>
</div>
```

```js
const app = Vue.createApp({
  data() {
    return {
      newTodoText: '',
      todos: [
        {
          id: 1,
          title: 'Do the dishes'
        },
        {
          id: 2,
          title: 'Take out the trash'
        },
        {
          id: 3,
          title: 'Mow the lawn'
        }
      ],
      nextTodoId: 4
    }
  },
  methods: {
    addNewTodo() {
      this.todos.push({
        id: this.nextTodoId++,
        title: this.newTodoText
      })
      this.newTodoText = ''
    }
  }
})

app.component('todo-item', {
  template: `
    <li>
      {{ title }}
      <button @click="$emit('remove')">Remove</button>
    </li>
  `,
  props: ['title'],
  emits: ['remove']
})

app.mount('#todo-list-example')
```



# åã€äº‹ä»¶å¤„ç†

## ç›‘å¬äº‹ä»¶

- `v-on` or `@`æ¥ç›‘å¬DOMäº‹ä»¶

```html
<div id="basic-event">
  <button @click="counter += 1">Add 1</button>
  <p>The button above has been clicked {{ counter }} times.</p>
</div>
```

```js
Vue.createApp({
  data() {
    return {
      counter: 0
    }
  }
}).mount('#basic-event')
```

## äº‹ä»¶å¤„ç†æ–¹æ³•

```html
<div id="event-with-method">
  <!-- `greet` æ˜¯åœ¨ä¸‹é¢å®šä¹‰çš„æ–¹æ³•å -->
  <button @click="greet">Greet</button>
</div>
```

```js
Vue.createApp({
  data() {
    return {
      name: 'Vue.js'
    }
  },
  methods: {
    greet(event) {
      // `methods` å†…éƒ¨çš„ `this` æŒ‡å‘å½“å‰æ´»åŠ¨å®ä¾‹
      alert('Hello ' + this.name + '!')
      // `event` æ˜¯åŸç”Ÿ DOM event
      if (event) {
        alert(event.target.tagName)
      }
    }
  }
}).mount('#event-with-method')
```

## å†…è”å¤„ç†å™¨ä¸­çš„æ–¹æ³•

```html
<div id="inline-handler">
  <button @click="say('hi')">Say hi</button>
  <button @click="say('what')">Say what</button>
</div>
```

```js
Vue.createApp({
  methods: {
    say(message) {
      alert(message)
    }
  }
}).mount('#inline-handler')
```

- å¯ä»¥ç”¨ç‰¹æ®Šå˜é‡ `$event` æŠŠDOMäº‹ä»¶ä¼ å…¥æ–¹æ³•

```html
<button @click="warn('Form cannot be submitted yet.', $event)">
  Submit
</button>
```

```js
// ...
methods: {
  warn(message, event) {
    // ç°åœ¨å¯ä»¥è®¿é—®åˆ°åŸç”Ÿäº‹ä»¶
    if (event) {
      event.preventDefault()
    }
    alert(message)
  }
}
```

## å¤šäº‹ä»¶å¤„ç†å™¨

```html
<!-- è¿™ä¸¤ä¸ª one() å’Œ two() å°†æ‰§è¡ŒæŒ‰é’®ç‚¹å‡»äº‹ä»¶ -->
<button @click="one($event), two($event)">
  Submit
</button>
```

```js
// ...
methods: {
  one(event) {
    // ç¬¬ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨é€»è¾‘...
  },
  two(event) {
   // ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†å™¨é€»è¾‘...
  }
}
```

## äº‹ä»¶ä¿®é¥°ç¬¦

- `.stop`
- `.prevent`
- `.capture`
- `.self`
- `.once`
- `.passive`

```html
<!-- é˜»æ­¢å•å‡»äº‹ä»¶ç»§ç»­ä¼ æ’­ -->
<a @click.stop="doThis"></a>

<!-- æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ -->
<form @submit.prevent="onSubmit"></form>

<!-- ä¿®é¥°ç¬¦å¯ä»¥ä¸²è” -->
<a @click.stop.prevent="doThat"></a>

<!-- åªæœ‰ä¿®é¥°ç¬¦ -->
<form @submit.prevent></form>

<!-- æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ -->
<!-- å³å†…éƒ¨å…ƒç´ è§¦å‘çš„äº‹ä»¶å…ˆåœ¨æ­¤å¤„ç†ï¼Œç„¶åæ‰äº¤ç”±å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç† -->
<div @click.capture="doThis">...</div>

<!-- åªå½“åœ¨ event.target æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘å¤„ç†å‡½æ•° -->
<!-- å³äº‹ä»¶ä¸æ˜¯ä»å†…éƒ¨å…ƒç´ è§¦å‘çš„ -->
<div @click.self="doThat">...</div>
```

```html
<!-- ç‚¹å‡»äº‹ä»¶å°†åªä¼šè§¦å‘ä¸€æ¬¡ -->
<a @click.once="doThis"></a>
```

```html
<!-- æ»šåŠ¨äº‹ä»¶çš„é»˜è®¤è¡Œä¸º (å³æ»šåŠ¨è¡Œä¸º) å°†ä¼šç«‹å³è§¦å‘   -->
<!-- è€Œä¸ä¼šç­‰å¾… `onScroll` å®Œæˆ                   -->
<!-- è¿™å…¶ä¸­åŒ…å« `event.preventDefault()` çš„æƒ…å†µ   -->
<div @scroll.passive="onScroll">...</div>
```

## æŒ‰é”®ä¿®é¥°ç¬¦

```html
<!-- åªæœ‰åœ¨ `key` æ˜¯ `Enter` æ—¶è°ƒç”¨ `vm.submit()` -->
<input @keyup.enter="submit" />
```

- æŒ‰é”®åˆ«å
  - `.enter`
  - `.tab`
  - `.delete` (æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®)
  - `.esc`
  - `.space`
  - `.up`
  - `.down`
  - `.left`
  - `.right`

## ç³»ç»Ÿä¿®é¥°é”®

- `.ctrl`
- `.alt`
- `.shift`
- `.meta`

```html
<!-- Alt + Enter -->
<input @keyup.alt.enter="clear" />

<!-- Ctrl + Click -->
<div @click.ctrl="doSomething">Do something</div>
```

- `.exact`ï¼š å…è®¸ä½ æ§åˆ¶ç”±ç²¾ç¡®çš„ç³»ç»Ÿä¿®é¥°ç¬¦ç»„åˆè§¦å‘çš„äº‹ä»¶

```html
<!-- å³ä½¿ Alt æˆ– Shift è¢«ä¸€åŒæŒ‰ä¸‹æ—¶ä¹Ÿä¼šè§¦å‘ -->
<button @click.ctrl="onClick">A</button>

<!-- æœ‰ä¸”åªæœ‰ Ctrl è¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ -->
<button @click.ctrl.exact="onCtrlClick">A</button>

<!-- æ²¡æœ‰ä»»ä½•ç³»ç»Ÿä¿®é¥°ç¬¦è¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ -->
<button @click.exact="onClick">A</button>
```

## é¼ æ ‡æŒ‰é’®ä¿®é¥°ç¬¦

- `.left`
- `.right`
- `.middle`



# åä¸€ã€è¡¨å•è¾“å…¥ç»‘å®š

## åŸºç¡€ç”¨æ³•

- ç”¨ v-model æŒ‡ä»¤åœ¨è¡¨å• `<input>`ã€`<textarea>` åŠ `<select>` å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®š

- `v-model` ä¼šå¿½ç•¥æ‰€æœ‰è¡¨å•å…ƒç´ çš„ `value`ã€`checked`ã€`selected` attribute çš„åˆå§‹å€¼è€Œæ€»æ˜¯å°†å½“å‰æ´»åŠ¨å®ä¾‹çš„æ•°æ®ä½œä¸ºæ•°æ®æ¥æº
- é€šè¿‡ JavaScript åœ¨ç»„ä»¶çš„ `data` é€‰é¡¹ä¸­å£°æ˜åˆå§‹å€¼ã€‚
- `v-model` åœ¨å†…éƒ¨ä¸ºä¸åŒçš„è¾“å…¥å…ƒç´ ä½¿ç”¨ä¸åŒçš„ property å¹¶æŠ›å‡ºä¸åŒçš„äº‹ä»¶ï¼š
  - text å’Œ textarea å…ƒç´ ä½¿ç”¨ `value` property å’Œ `input` äº‹ä»¶ï¼›
  - checkbox å’Œ radio ä½¿ç”¨ `checked` property å’Œ `change` äº‹ä»¶ï¼›
  - select å­—æ®µå°† `value` ä½œä¸º prop å¹¶å°† `change` ä½œä¸ºäº‹ä»¶ã€‚

 **æ–‡æœ¬(Text)**

```html
<input v-model="message" placeholder="edit me" />
<p>Message is: {{ message }}</p>
```

**å¤šè¡Œæ–‡æœ¬ (Textarea)**

```html
<span>Multiline message is:</span>
<p style="white-space: pre-line;">{{ message }}</p>
<br />
<textarea v-model="message" placeholder="add multiple lines"></textarea>
```

**å¤é€‰æ¡† (Checkbox)**

```html
<input type="checkbox" id="checkbox" v-model="checked" />
<label for="checkbox">{{ checked }}</label>
```

```html
<div id="v-model-multiple-checkboxes">
  <input type="checkbox" id="jack" value="Jack" v-model="checkedNames" />
  <label for="jack">Jack</label>
  <input type="checkbox" id="john" value="John" v-model="checkedNames" />
  <label for="john">John</label>
  <input type="checkbox" id="mike" value="Mike" v-model="checkedNames" />
  <label for="mike">Mike</label>
  <br />
  <span>Checked names: {{ checkedNames }}</span>
</div>
```

```js
Vue.createApp({
  data() {
    return {
      checkedNames: []
    }
  }
}).mount('#v-model-multiple-checkboxes')
```

**å•é€‰æ¡† (Radio)**

```html
<div id="v-model-radiobutton">
  <input type="radio" id="one" value="One" v-model="picked" />
  <label for="one">One</label>
  <br />
  <input type="radio" id="two" value="Two" v-model="picked" />
  <label for="two">Two</label>
  <br />
  <span>Picked: {{ picked }}</span>
</div>
```

```js
Vue.createApp({
  data() {
    return {
      picked: ''
    }
  }
}).mount('#v-model-radiobutton')
```

**é€‰æ‹©æ¡† (Select)**

```html
<div id="v-model-select" class="demo">
  <select v-model="selected">
    <option disabled value="">Please select one</option>
    <option>A</option>
    <option>B</option>
    <option>C</option>
  </select>
  <span>Selected: {{ selected }}</span>
</div>
```

```js
Vue.createApp({
  data() {
    return {
      selected: ''
    }
  }
}).mount('#v-model-select')
```

- å¤šé€‰

```html
<select v-model="selected" multiple>
  <option>A</option>
  <option>B</option>
  <option>C</option>
</select>
<br />
<span>Selected: {{ selected }}</span>
```

- ç”¨`v-for`æ¸²æŸ“åŠ¨æ€é€‰é¡¹

```html
<div id="v-model-select-dynamic" class="demo">
  <select v-model="selected">
    <option v-for="option in options" :value="option.value">
      {{ option.text }}
    </option>
  </select>
  <span>Selected: {{ selected }}</span>
</div>
```

```js
Vue.createApp({
  data() {
    return {
      selected: 'A',
      options: [
        { text: 'One', value: 'A' },
        { text: 'Two', value: 'B' },
        { text: 'Three', value: 'C' }
      ]
    }
  }
}).mount('#v-model-select-dynamic')
```

## å€¼ç»‘å®š

- å¯¹äºå•é€‰æŒ‰é’®ï¼Œå¤é€‰æ¡†åŠé€‰æ‹©æ¡†çš„é€‰é¡¹ï¼Œ`v-model` ç»‘å®šçš„å€¼é€šå¸¸æ˜¯é™æ€å­—ç¬¦ä¸² (å¯¹äºå¤é€‰æ¡†ä¹Ÿå¯ä»¥æ˜¯å¸ƒå°”å€¼)

```html
<!-- å½“é€‰ä¸­æ—¶ï¼Œ`picked` ä¸ºå­—ç¬¦ä¸² "a" -->
<input type="radio" v-model="picked" value="a" />

<!-- `toggle` ä¸º true æˆ– false -->
<input type="checkbox" v-model="toggle" />

<!-- å½“é€‰ä¸­ç¬¬ä¸€ä¸ªé€‰é¡¹æ—¶ï¼Œ`selected` ä¸ºå­—ç¬¦ä¸² "abc" -->
<select v-model="selected">
  <option value="abc">ABC</option>
</select>
```

- ä½¿ç”¨`v-bind`ç»‘å®šåˆ°åŠ¨æ€propertyä¸Š

**å¤é€‰æ¡† (Checkbox)**

```html
<input type="checkbox" v-model="toggle" true-value="yes" false-value="no" />
```

```js
// when checked:
vm.toggle === 'yes'
// when unchecked:
vm.toggle === 'no'
```

**å•é€‰æ¡† (Radio)**

```html
<input type="radio" v-model="pick" v-bind:value="a" />
```

```js
// å½“é€‰ä¸­æ—¶
vm.pick === vm.a
```

**é€‰æ‹©æ¡†é€‰é¡¹ (Select Options)**

```html
<select v-model="selected">
  <!-- å†…è”å¯¹è±¡å­—é¢é‡ -->
  <option :value="{ number: 123 }">123</option>
</select>
```

```js
// å½“è¢«é€‰ä¸­æ—¶
typeof vm.selected // => 'object'
vm.selected.number // => 123
```

## ä¿®é¥°ç¬¦

- `.lazy`: åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ`v-model` åœ¨æ¯æ¬¡ `input` äº‹ä»¶è§¦å‘åå°†è¾“å…¥æ¡†çš„å€¼ä¸æ•°æ®è¿›è¡ŒåŒæ­¥ (é™¤äº†[ä¸Šè¿°](https://v3.cn.vuejs.org/guide/forms.html#vmodel-ime-tip)è¾“å…¥æ³•ç»„ç»‡æ–‡å­—æ—¶)ã€‚ä½ å¯ä»¥æ·»åŠ  `lazy` ä¿®é¥°ç¬¦ï¼Œä»è€Œè½¬ä¸ºåœ¨ `change` äº‹ä»¶_ä¹‹å_è¿›è¡ŒåŒæ­¥ï¼š

```html
<!-- åœ¨â€œchangeâ€æ—¶è€Œéâ€œinputâ€æ—¶æ›´æ–° -->
<input v-model.lazy="msg" />
```

- `.number`: è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸ºæ•°å€¼ç±»å‹ã€‚å¦‚æœè¿™ä¸ªå€¼æ— æ³•è¢« `parseFloat()` è§£æï¼Œåˆ™ä¼šè¿”å›åŸå§‹çš„å€¼

```html
<input v-model.number="age" type="number" />
```

- `.trim`

```html
<input v-model.trim="msg" />
```



# åäºŒã€ç»„ä»¶åŸºç¡€

## åŸºæœ¬å®ä¾‹

```js
// åˆ›å»ºä¸€ä¸ªVue åº”ç”¨
const app = Vue.createApp({})

// å®šä¹‰ä¸€ä¸ªåä¸º button-counter çš„æ–°å…¨å±€ç»„ä»¶
app.component('button-counter', {
  data() {
    return {
      count: 0
    }
  },
  template: `
    <button @click="count++">
      You clicked me {{ count }} times.
    </button>`
})
```

## ç»„ä»¶å¤ç”¨

- æ¯ç”¨ä¸€æ¬¡ç»„ä»¶ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªå®ƒçš„æ–°**å®ä¾‹**è¢«åˆ›å»º

## ç»„ä»¶ç»„ç»‡

- æ³¨å†Œç±»å‹ï¼š**å…¨å±€æ³¨å†Œ**å’Œ**å±€éƒ¨æ³¨å†Œ**

## é€šè¿‡Propå‘å­ç»„ä»¶ä¼ é€’æ•°æ®

```js
const app = Vue.createApp({
  data() {
    return {
      posts: [
        { id: 1, title: 'My journey with Vue' },
        { id: 2, title: 'Blogging with Vue' },
        { id: 3, title: 'Why Vue is so fun' }
      ]
    }
  }
})

app.component('blog-post', {
  props: ['title'],
  template: `<h4>{{ title }}</h4>`
})

app.mount('#blog-post-demo')
```

```html
<div id="blog-post-demo" class="demo">
  <blog-post title="My journey with Vue"></blog-post>
  <blog-post title="Blogging with Vue"></blog-post>
  <blog-post title="Why Vue is so fun"></blog-post>
</div>
```

```html
<div id="blog-posts-demo">
  <blog-post
    v-for="post in posts"
    :key="post.id"
    :title="post.title"
  ></blog-post>
</div>
```

## ç›‘å¬å­ç»„ä»¶äº‹ä»¶

ä¾‹ï¼šåœ¨çˆ¶ç»„ä»¶ä¸­æ·»åŠ æ§åˆ¶å­ç»„ä»¶å­—ä½“å¤§å°åŠŸèƒ½

```js
const App = {
  data() {
    return {
      posts: [
        /* ... */
      ],
      postFontSize: 1
    }
  }
}
```

- æ·»åŠ `v-on`or`@`ç›‘å¬å­ç»„ä»¶å®ä¾‹çš„ä»»æ„äº‹ä»¶

```html
<div id="blog-posts-events-demo">
  <div :style="{ fontSize: postFontSize + 'em' }">
    <blog-post
      v-for="post in posts"
      :key="post.id"
      :title="post.title"
      @enlarge-text="postFontSize += 0.1"
    ></blog-post>
  </div>
</div>
```

- åœ¨buttonä¸Šæ·»åŠ [**$emit** æ–¹æ³•](https://v3.cn.vuejs.org/api/instance-methods.html#emit)æ–¹æ³•è§¦å‘äº‹ä»¶

```js
app.component('blog-post', {
  props: ['title'],
  template: `
    <div class="blog-post">
      <h4>{{ title }}</h4>
      <button @click="$emit('enlargeText')>
        Enlarge text
      </button>
    </div>
  `
})
```

- å¯ä»¥åœ¨ç»„ä»¶çš„`emits`é€‰é¡¹ä¸­åˆ—å‡ºå·²æŠ›å‡ºçš„äº‹ä»¶ï¼Œä»¥ä¾¿æ£€æŸ¥ç»„ä»¶æŠ›å‡ºçš„æ‰€æœ‰äº‹ä»¶ï¼š

```js
app.component('blog-post', {
  props: ['title'],
  emits: ['enlargeText']
})
```



**ä½¿ç”¨äº‹ä»¶æŠ›å‡ºä¸€ä¸ªå€¼**

- å­ç»„ä»¶åœ¨`$emit`çš„ç¬¬äºŒä¸ªå‚æ•°æä¾›ä¸€ä¸ªå€¼

```html
<button @click="$emit('enlargeText', 0.1)">
  Enlarge text
</button>
```

- çˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡`$event`è®¿é—®åˆ°è¿™ä¸ªå€¼

```html
<blog-post ... @enlarge-text="postFontSize += $event"></blog-post>
```

â€‹	orç›´æ¥é€ç»™å¤„ç†å‡½æ•°

```html
<blog-post ... @enlarge-text="onEnlargeText"></blog-post>
```

```js
methods: {
  onEnlargeText(enlargeAmount) {
    this.postFontSize += enlargeAmount
  }
}
```



**åœ¨ç»„ä»¶ä¸Šä½¿ç”¨v-model**

```html
<input v-model="searchText" />
```

ç­‰ä»·äº

```html
<input :value="searchText" @input="searchText = $event.target.value" />
```

åœ¨ç»„ä»¶ä¸Šï¼Œ`v-model`ï¼š

```html
<custom-input
  :model-value="searchText"
  @update:model-value="searchText = $event"
></custom-input>
```

ä¾‹ï¼š

```html
<custom-input v-model="searchText"></custom-input>
```

```js
app.component('custom-input', {
  props: ['modelValue'],
  emits: ['update:modelValue'],
  template: `
    <input
      :value="modelValue"
      @input="$emit('update:modelValue', $event.target.value)"
    >
  `
})
```

- å®ç° `v-model` çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ `computed` property çš„åŠŸèƒ½æ¥å®šä¹‰ getter å’Œ setterã€‚`get` æ–¹æ³•åº”è¿”å› `modelValue` propertyï¼Œ`set` æ–¹æ³•åº”è¯¥è§¦å‘ç›¸åº”çš„äº‹ä»¶ã€‚

```js
app.component('custom-input', {
  props: ['modelValue'],
  emits: ['update:modelValue'],
  template: `
    <input v-model="value">
  `,
  computed: {
    value: {
      get() {
        return this.modelValue
      },
      set(value) { 
        this.$emit('update:modelValue', value)
      }
    }
  }
})
```

## é€šè¿‡æ’æ§½åˆ†å‘å†…å®¹

```js
app.component('alert-box', {
  template: `
    <div class="demo-alert-box">
      <strong>Error!</strong>
      <slot></slot>
    </div>
  `
})
```

## åŠ¨æ€ç»„ä»¶

```html
<!-- ç»„ä»¶ä¼šåœ¨ `currentTabComponent` æ”¹å˜æ—¶æ”¹å˜ -->
<component :is="currentTabComponent"></component>
```

## è§£æDOMæ¨¡ç‰ˆæ—¶çš„æ³¨æ„äº‹é¡¹

- Element Placement Restriction: HTMLå…ƒç´ å†…éƒ¨èƒ½æ”¾ä»€ä¹ˆå…ƒç´ æ˜¯æœ‰ä¸¥æ ¼é™åˆ¶çš„ã€‚
  - ç”¨`is` attributeç»•è¿‡

```html
<table>
  <tr is="vue:blog-post-row"></tr>
</table>
```

â€‹		å½“å®ƒç”¨äºåŸç”Ÿ HTML å…ƒç´ æ—¶ï¼Œ`is` çš„å€¼å¿…é¡»ä»¥ `vue:` å¼€å¤´ï¼Œæ‰å¯ä»¥è¢«è§£é‡Šä¸º Vue ç»„ä»¶ã€‚è¿™æ˜¯é¿å…å’ŒåŸç”Ÿ[è‡ªå®šä¹‰å…ƒç´ ](https://html.spec.whatwg.org/multipage/custom-elements.html#custom-elements-customized-builtin-example)æ··æ·†ã€‚

- Case Insensitivity
  - HTML attribute åä¸åŒºåˆ†å¤§å°å†™ï¼Œå› æ­¤æµè§ˆå™¨å°†æ‰€æœ‰å¤§å†™å­—ç¬¦è§£é‡Šä¸ºå°å†™
  - é©¼å³° prop åç§°å’Œ event å¤„ç†å™¨å‚æ•°éœ€è¦ä½¿ç”¨å®ƒä»¬çš„ kebab-cased (æ¨ªçº¿å­—ç¬¦åˆ†éš”) ç­‰æ•ˆå€¼
